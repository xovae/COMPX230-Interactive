@using RexSimulator.Hardware
@using RexSimulator.Hardware.Wramp
@using System.Runtime.InteropServices
@using System.Reflection.Metadata

@code {
    [Parameter]
    required public SimpleWrampCpu CPU { get; set; }

    [Parameter]
    required public RegisterType registerType { get; set; }

    public string[] GPRegisterNames = new string[] { "$0", "$1", "$2", "$3", "$4", "$5", "$6", "$7", "$8", "$9", "$10", "$11", "$12", "$13", "$sp", "$ra" };
    public string[] SPRegisterNames = new string[] { "$spr0", "$spr1", "$spr2", "$spr3", "$cctrl", "$estat", "$icount", "$ccount", "$evec", "$ear", "$esp", "$ers", "$ptable", "$rbase", "$spr14", "$spr15" };
}

@* Prints out the GPIO registers $1-$13 in decimal, hex, and binary *@
@if (CPU != null) {
    <table class="wsimTable">
        <thead>
            <tr>
                <th>Register</th>
                <th>Decimal</th>
                <th>Hex</th>
                <th>Binary</th>
            </tr>
        </thead>
        <tbody>
            @for (uint i = 1; i <= 15; i++)
            {
                uint val;
                <tr>
                    @if (registerType == RegisterType.GP)
                    {
                        val = CPU.mGpRegisters[i];
                        <td>@GPRegisterNames[i]</td>
                    }
                    else
                    {
                        val = CPU.mSpRegisters[i];
                        <td>@SPRegisterNames[i]</td>
                    }
                    <td>@val</td>
                    <td>@("0x" + val.ToString("X8"))</td>
                    <td>@Convert.ToString(val, 2).PadLeft(32, '0')</td>
                </tr>
            }
        </tbody>
    </table>
}
